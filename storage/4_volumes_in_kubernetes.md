# Volumes in Kubernetes

## Introduction to Volumes in Kubernetes
In this lecture, we will discuss persistent volumes in Kubernetes. My name is Vumshaw Manembeth. Before diving into persistent volumes, let's first understand volumes in Kubernetes by comparing them with volumes in Docker.

## Volumes in Docker
Docker containers are designed to be transient, meaning they last only for a short period. They are created to process data and destroyed once the task is complete. Consequently, the data inside the container is also destroyed along with the container.
To persist data processed by containers, volumes are attached when containers are created. The data processed by the container is stored in this volume, thereby retaining it permanently. Even if the container is deleted, the data generated or processed remains intact.

## Volumes in Kubernetes
Similarly, in Kubernetes, pods are transient. When a pod is created to process data and then deleted, the data processed by it is also deleted. To persist data, we attach a volume to the pod. The data generated by the pod is stored in the volume, and even after the pod is deleted, the data remains.

Example: Using Volumes in a Single Node Kubernetes Cluster
Consider a single-node Kubernetes cluster where we create a simple pod that generates a random number between one and one hundred. This number is written to a file located at /opt/number.out. When the pod is deleted, the random number is lost along with it.

To retain the number generated by the pod, we create a volume. A volume requires storage, which can be configured in various ways. For now, we configure it to use a directory on the host machine. In this example, the path /data on the host is specified. Any files created in the volume will be stored in this directory on the node.

Once the volume is created, it is mounted inside the container. Using the volumeMounts field in the container specification, the volume is mounted to the /opt directory inside the container. The random number will now be written to /opt/number.out inside the container, which corresponds to the /data directory on the host.

When the pod is deleted, the file with the random number still exists on the host.

## Volume Storage Options
The example above uses the hostPath option to configure storage directly on the host. While this works for single-node clusters, it is not recommended for multi-node clusters. This is because pods running on different nodes would use the /data directory on their respective hosts, which are not synchronized or identical unless an external replicated cluster storage solution is configured.

Kubernetes supports various storage solutions, including:
- Network File System (NFS)
- Clustered filesystems
- Flocker
- Fibre Channel
- Ceph FS
- ScaleIO

Public cloud storage options such as AWS Elastic Block Store (EBS), Azure Disk or File, and 

## Google Persistent Disk
For example, to configure an AWS Elastic Block Store volume as storage for a volume, the hostPath field is replaced with the awsElasticBlockStore field, specifying the volume ID and file system type. This configures the volume storage on AWS EBS.